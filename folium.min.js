var FoliumTable=function(b,p){function A(a){-1===a?(f=-1,u=void 0):d===$(document).attr("activeTable")&&(f=a,void 0!==u&&u.removeClass("selectedRow"),a=(new Number(a+1)).toString(),u=$("#"+d+" tr:eq("+a+")"),u.focus(),u.addClass("selectedRow"))}function v(a){if(!(a>=C)&&d===$(document).attr("activeTable")){$("#"+d+" th:eq("+g+")").removeClass("selectedColumnHeader");g=a;void 0!==w&&w.removeClass("selectedColumn");var b=(new Number(f+1)).toString();w=$("#"+d+" tr:eq("+b+")").find("td:eq("+a+")");w.addClass("selectedColumn");
$("#"+d+" th:eq("+g+")").addClass("selectedColumnHeader");w.focus()}}function G(a,b){return a.localeCompare(b,h)}function D(a,b){return a-b}function K(a){if(-1!==a&&b.sortable){var e=b.columns[a].columnId,k=b.columns[a].dataType,c=E.get(e),d=q.get(k),x=m?a:e;b.rows.sort(function(a,b){return c*d(a[x],b[x])});E.set(e,-1*c)}}function H(a){a=void 0===a?b.rows:a;var e=a.length%c.pageSize;c.numOfPages=parseInt(a.length/c.pageSize);c.numOfPages=0!==e?c.numOfPages+1:c.numOfPages;e=(c.currentPage-1)*c.pageSize+
1;a=e+a.slice((c.currentPage-1)*c.pageSize,c.currentPage*c.pageSize).length-1;$("#"+d+"pageInfo").val(e+"-"+a+" | Page: "+c.currentPage+"/"+c.numOfPages)}function r(a){a=void 0===a?b.rows:a;$("#"+b.tableId+" tbody").remove();B(a);H(a)}function B(a){a=void 0===a?b.rows:a;p.append("<tbody>");(b.pagination.active?a.slice((c.currentPage-1)*c.pageSize,c.currentPage*c.pageSize):a).forEach(function(a,k){var e='<tr class="'+(0===k%2?"evenRow":"oddRow")+'">';b.columns.forEach(function(b,c){var d=m?a[c]:a[b.columnId];
var l=F(k,c,d,a);e+=void 0===d?"<td></td>":"<td>"+l+"</td>"});e+="</tr>";p.append(e)});p.append("</tbody>");$("#"+d).on("click","td",function(){var a=$(this).parent(),b=$(this);a=a.index();b=b.index();A(a);v(b);y.get("rowClicked")(a)});$("#"+b.tableId+" td").dblclick(function(){var a=$(this).parent().index();I($(this));y.get("rowDoubleClicked")(a)})}function I(a){var e=a.css("width"),c=a.parent().index(),d=a.index(),f=b.columns[d].columnId,x=m?b.rows[c][d]:b.rows[c][f];if(b.editable){a.html('<input type="text" id="cellEditor" style="width:'+
e+'" value="'+x+'" />');var g=$("#cellEditor");g.focus();g[0].setSelectionRange(x.length,x.length);$("#cellEditor").focusout(function(){var e=g.val();e=t.get(b.columns[d].dataType)(e);m?b.rows[c][d]=e:b.rows[c][f]=e;e=F(c,d,e,b.rows[c]);a.html(e)});$("#cellEditor").keypress(function(a){13===a.keyCode&&(v(d+1),p.focus())})}}var L=this;if(void 0===b.columns)console.error('"columns" property is not defined in table settings. Please make sure that it is defined in your table settings.');else if(void 0===
b.rows)console.error('"rows" property is not defined in table settings. Please make sure that it is defined in your table settings.');else{var n=b.rows.length,C=b.columns.length,f=-1,u=void 0,g=-1,w=void 0,d=b.tableId,F=void 0,h="en-US",z="",m=void 0,c={pageSize:-1,numOfPages:0,currentPage:1},E=new Map,q=new Map,y=new Map,t=new Map;y.set("rowClicked",function(a){});y.set("rowDoubleClicked",function(a){});b.pagination=void 0===b.pagination?{active:!1,size:-1}:b.pagination;b.sortable=void 0===b.sortable?
!1:b.sortable;b.editable=void 0===b.editable?!1:b.editable;b.searching=void 0===b.searching?!1:b.searching;q.set("number",D);q.set("float",D);q.set("integer",D);q.set("datetime",function(a,b){return a>b?1:a<b?-1:0});q.set("string",G);q.set(void 0,G);t.set("integer",function(a){return parseInt(a)});t.set("float",function(a){return parseFloat(a)});t.set("number",function(a){return parseFloat(a)});t.set("datetime",function(a){return new Date(a)});t.set("integer",function(a){return a.toString()});t.set(void 0,
function(a){return a.toString()});p.addClass("folium");p.attr("tabindex","0");m=void 0!==b.rowsAsArrays&&null!==b.rowsAsArrays&&"boolean"===typeof b.rowsAsArrays?b.rowsAsArrays:!1;F=this.cellRenderer=void 0!==b.cellRenderer?b.cellRenderer:function(a,b,c,d){return c};void 0!==b.width&&$(".folium").css("width",""+b.width);void 0!==b.height&&$(".folium").css("height",""+b.height);var J=b.columns;J.forEach(function(a){return E.set(a.columnId,1)});(function(a){var b='<thead><tr id="columns">';a.forEach(function(a){return b+=
'<th class="columnHeader sortHeader" id="'+a.columnId+'">'+a.displayText+"</th>"});b+="</tr>";p.append(b+"</thead>")})(J);b.pagination.active&&"number"===typeof b.pagination.size&&($("#"+d).before('<div class="foliumPageBar"><button id="'+d+'foliumPageFirst" class="pageBarButton">First</button><button class="pageBarButton" id="'+d+'foliumPagePrevious"><</button><input type="text" id="'+d+'pageInfo" class="infoBox" readonly /><button class="pageBarButton" id="'+d+'foliumPageNext">></button><button class="pageBarButton" id="'+
d+'foliumPageLast">Last</button></div>'),$(".foliumPageBar").css("width",$("#"+d).css("width")),c.pageSize=b.pagination.size,H(),$("#"+d+"foliumPageNext").click(function(){c.currentPage+1>c.numOfPages||(c.currentPage++,r())}),$("#"+d+"foliumPagePrevious").click(function(){1>c.currentPage-1||(c.currentPage--,r())}),$("#"+d+"foliumPageFirst").click(function(){1!==c.currentPage&&(c.currentPage=1,r())}),$("#"+d+"foliumPageLast").click(function(){c.currentPage!==c.numOfPages&&(c.currentPage=c.numOfPages,
r())}));void 0===b.pagination.size&&console.error("Pagination size is not defined! Pagination skipped.");B();$("td,th").on("focus",function(){$(L).closest("table").focus()});$("#"+b.tableId).focus(function(){$(document).attr("activeTable",b.tableId)});$("#"+b.tableId).focusout(function(){$(document).attr("activeTable",null)});$("#"+d+" th").click(function(){var a=$(this).index();b.sortable&&(K(a),$("#"+b.tableId+" tbody").remove(),B())});$(document).keydown(function(a){var c=$(document).attr("activeTable");
a=a.keyCode;null!==c&&void 0!==c&&c===d&&(37===a?0>=g||v(g-1):38===a?0>=f||(A(f-1),v(g)):39===a?g!==C-1&&v(g+1):40===a?f!==n-1&&(A(f+1),v(g)):b.editable&&I(w))});this.addRow=function(a){var c=this;b.rows.push(a);n+=1;if(""!==z)this.search(z,-1);else if(b.pagination.active)r();else{var k='<tr class="'+(0===(n-1)%2?"evenRow":"oddRow")+'">';b.columns.forEach(function(b,e){var d=m?a[e]:a[b.columnId],l=c.cellRenderer(n-1,e,d,a);k+=void 0===d?"<td></td>":"<td>"+l+"</td>"});k+="</tr>";$("#"+d+" tr:last").after(k)}};
this.addRows=function(a){var b=this;a.forEach(function(a){return b.addRow(a)})};this.updateRow=function(a,e){var k=this,l=b.rows[a];m?Object.keys(e).forEach(function(a){var c=b.columns.map(function(a){return a.columnId}).indexOf(a);console.log(c);l[c]=e[a]}):Object.keys(e).forEach(function(a){return l[a]=e[a]});var g="";b.columns.forEach(function(a,b){var c=m?l[b]:l[a.columnId],e=k.cellRenderer(n-1,b,c,l);g+=void 0===c?"<td></td>":"<td>"+e+"</td>"});var f=a+1;if(b.pagination.active){f=(c.currentPage-
1)*c.pageSize;var h=c.currentPage*c.pageSize-1;a>=f&&a<=h&&$("#"+d+" tr:eq("+(a-f+1)+")").html(g)}else $("#"+d+" tr:eq("+f+")").html(g)};this.updateRows=function(a,b){for(var c=0;c<a.length;c++)this.updateRow(a[c],b[c])};this.deleteRow=function(a){b.rows.splice(a,1);--n;if(""!==z)this.search(z,-1);else if(b.pagination.active)r();else for(A(a-1),$("#"+d+" tr:eq("+(a+1)+")").remove();a<n;a++){var c=0===a%2?"evenRow":"oddRow";$("#"+d+" tr:eq("+(a+1)+")").removeClass().addClass(c)}};this.deleteRows=function(a){var b=
this;a.forEach(function(a){return b.deleteRow(a)})};this.selectedRow=function(){return f};this.selectedRowInModel=function(){return b.pagination.active?(c.currentPage-1)*c.pageSize+f:f};this.selectedColumn=function(){return g};this.columnCount=function(){return C};this.rowCount=function(){return n};this.getRow=function(a){return b.rows[a]};this.getRows=function(){return b.rows};this.on=function(a,b){y.set(a,b)};this.currentPage=function(){return currentPage};this.pageCount=function(){return pageCount};
this.getId=function(){return d};this.setLocale=function(a){h=a};this.search=function(a,c){c=void 0===c?-1:c;if(b.searching){z=a;var d=null;d=m?-1!==c?b.rows.filter(function(b){return b[c].toLowerCase(h).includes(a.toLowerCase(h))}):b.rows.filter(function(b){return Object.values(b).join(";").toLowerCase(h).includes(a.toLowerCase(h))}):-1!==c?b.rows.filter(function(d){return d[b.columns[c].columnId].toLowerCase(h).includes(a.toLowerCase(h))}):b.rows.filter(function(b){return Object.values(b).join(";").toLowerCase(h).includes(a.toLowerCase(h))});
$("#"+b.tableId+" tbody").remove();b.pagination.active?r(d):B(d);return d.length}console.error("Searching is not enabled for this table! You can enable searching by defining searching property as true for the table settings.")}}};$.fn.FoliumTable=function(b){if(void 0===b)return this[0].foliumObject;b.tableId=this[0].id;b=new FoliumTable(b,$(this));this[0].foliumObject=b;return this[0].foliumObject};