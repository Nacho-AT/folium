var FoliumTable=function(b,k){function y(a){-1===a?(g=-1,r=void 0):d===$(document).attr("activeTable")&&(g=a,void 0!==r&&r.removeClass("selectedRow"),a=(new Number(a+1)).toString(),r=$("#"+d+" tr:eq("+a+")"),r.focus(),r.addClass("selectedRow"))}function t(a){if(!(a>=A)&&d===$(document).attr("activeTable")){$("#"+d+" th:eq("+f+")").removeClass("selectedColumnHeader");f=a;void 0!==u&&u.removeClass("selectedColumn");var b=(new Number(g+1)).toString();u=$("#"+d+" tr:eq("+b+")").find("td:eq("+a+")");u.addClass("selectedColumn");
$("#"+d+" th:eq("+f+")").addClass("selectedColumnHeader");u.focus()}}function D(a,b){return a.localeCompare(b,v)}function B(a,b){return a-b}function I(a){if(-1!==a&&b.sortable){var e=b.columns[a].columnId;a=b.columns[a].dataType;var h=C.get(e),c=n.get(a);b.rows.sort(function(a,b){return h*c(a[e],b[e])});C.set(e,-1*h)}}function E(a){a=void 0===a?b.rows:a;var e=a.length%c.pageSize;c.numOfPages=parseInt(a.length/c.pageSize);c.numOfPages=0!==e?c.numOfPages+1:c.numOfPages;e=(c.currentPage-1)*c.pageSize+
1;a=e+a.slice((c.currentPage-1)*c.pageSize,c.currentPage*c.pageSize).length-1;$("#"+d+"pageInfo").val(e+"-"+a+" | Page: "+c.currentPage+"/"+c.numOfPages)}function p(a){a=void 0===a?b.rows:a;$("#"+b.tableId+" tbody").remove();z(a);E(a)}function z(a){a=void 0===a?b.rows:a;k.append("<tbody>");(b.pagination.active?a.slice((c.currentPage-1)*c.pageSize,c.currentPage*c.pageSize):a).forEach(function(a,h){var e='<tr class="'+(0===h%2?"evenRow":"oddRow")+'">';b.columns.forEach(function(b,c){var d=a[b.columnId],
J=F(h,c,d,a);e+=void 0===d?"<td></td>":"<td>"+J+"</td>"});e+="</tr>";k.append(e)});k.append("</tbody>");$("#"+d).on("click","td",function(){var a=$(this).parent(),b=$(this);a=a.index();b=b.index();y(a);t(b);w.get("rowClicked")(a)});$("#"+b.tableId+" td").dblclick(function(){var a=$(this).parent().index();G($(this));w.get("rowDoubleClicked")(a)})}function G(a){var e=a.css("width"),c=a.parent().index(),d=a.index(),g=b.columns[d].columnId,l=b.rows[c][g];if(b.editable){a.html('<input type="text" id="cellEditor" style="width:'+
e+'" value="'+l+'" />');var f=$("#cellEditor");f.focus();f[0].setSelectionRange(l.length,l.length);$("#cellEditor").focusout(function(){var e=f.val();e=q.get(b.columns[d].dataType)(e);b.rows[c][g]=e;e=b.cellRenderer(c,d,e,b.rows[c]);a.html(e)});$("#cellEditor").keypress(function(a){13===a.keyCode&&(t(d+1),k.focus())})}}var K=this;if(void 0===b.columns)console.error('"columns" property is not defined in table settings. Please make sure that it is defined in your table settings.');else if(void 0===
b.rows)console.error('"rows" property is not defined in table settings. Please make sure that it is defined in your table settings.');else{var m=b.rows.length,A=b.columns.length,g=-1,r=void 0,f=-1,u=void 0,d=b.tableId,F=void 0,v="en-US",x="",c={pageSize:-1,numOfPages:0,currentPage:1},C=new Map,n=new Map,w=new Map,q=new Map;w.set("rowClicked",function(a){});w.set("rowDoubleClicked",function(a){});b.pagination=void 0===b.pagination?{active:!1,size:-1}:b.pagination;b.sortable=void 0===b.sortable?!1:
b.sortable;b.editable=void 0===b.editable?!1:b.editable;b.searching=void 0===b.searching?!1:b.searching;n.set("number",B);n.set("float",B);n.set("integer",B);n.set("datetime",function(a,b){return a>b?1:a<b?-1:0});n.set("string",D);n.set(void 0,D);q.set("integer",function(a){return parseInt(a)});q.set("float",function(a){return parseFloat(a)});q.set("number",function(a){return parseFloat(a)});q.set("datetime",function(a){return new Date(a)});q.set("integer",function(a){return a.toString()});q.set(void 0,
function(a){return a.toString()});k.addClass("folium");k.attr("tabindex","0");F=this.cellRenderer=void 0!==b.cellRenderer?b.cellRenderer:function(a,b,c,d){return c};void 0!==b.width&&$(".folium").css("width",""+b.width);void 0!==b.height&&$(".folium").css("height",""+b.height);var H=b.columns;H.forEach(function(a){return C.set(a.columnId,1)});(function(a){var b='<thead><tr id="columns">';a.forEach(function(a){return b+='<th class="columnHeader sortHeader" id="'+a.columnId+'">'+a.displayText+"</th>"});
b+="</tr>";k.append(b+"</thead>")})(H);b.pagination.active&&"number"===typeof b.pagination.size&&($("#"+d).before('<div class="foliumPageBar"><button id="'+d+'foliumPageFirst" class="pageBarButton">First</button><button class="pageBarButton" id="'+d+'foliumPagePrevious"><</button><input type="text" id="'+d+'pageInfo" class="infoBox" readonly /><button class="pageBarButton" id="'+d+'foliumPageNext">></button><button class="pageBarButton" id="'+d+'foliumPageLast">Last</button></div>'),$(".foliumPageBar").css("width",
$("#"+d).css("width")),c.pageSize=b.pagination.size,E(),$("#"+d+"foliumPageNext").click(function(){c.currentPage+1>c.numOfPages||(c.currentPage++,p())}),$("#"+d+"foliumPagePrevious").click(function(){1>c.currentPage-1||(c.currentPage--,p())}),$("#"+d+"foliumPageFirst").click(function(){1!==c.currentPage&&(c.currentPage=1,p())}),$("#"+d+"foliumPageLast").click(function(){c.currentPage!==c.numOfPages&&(c.currentPage=c.numOfPages,p())}));void 0===b.pagination.size&&console.error("Pagination size is not defined! Pagination skipped.");
z();$("td,th").on("focus",function(){$(K).closest("table").focus()});$("#"+b.tableId).focus(function(){$(document).attr("activeTable",b.tableId)});$("#"+b.tableId).focusout(function(){$(document).attr("activeTable",null)});$("#"+d+" th").click(function(){var a=$(this).index();b.sortable&&(I(a),$("#"+b.tableId+" tbody").remove(),z())});$(document).keydown(function(a){var c=$(document).attr("activeTable");a=a.keyCode;null!==c&&void 0!==c&&c===d&&(37===a?0>=f||t(f-1):38===a?0>=g||(y(g-1),t(f)):39===
a?f!==A-1&&t(f+1):40===a?g!==m-1&&(y(g+1),t(f)):b.editable&&G(u))});this.addRow=function(a){var c=this;b.rows.push(a);m+=1;if(""!==x)this.search(x,-1);else if(b.pagination.active)p();else{var h='<tr class="'+(0===(m-1)%2?"evenRow":"oddRow")+'">';b.columns.forEach(function(b,e){var d=a[b.columnId],f=c.cellRenderer(m-1,e,d,a);h+=void 0===d?"<td></td>":"<td>"+f+"</td>"});h+="</tr>";$("#"+d+" tr:last").after(h)}};this.addRows=function(a){var b=this;a.forEach(function(a){return b.addRow(a)})};this.updateRow=
function(a,e){var h=this,f=b.rows[a];Object.keys(e).forEach(function(a){return f[a]=e[a]});var g="";b.columns.forEach(function(a,b){var c=f[a.columnId],e=h.cellRenderer(m-1,b,c,f);g+=void 0===c?"<td></td>":"<td>"+e+"</td>"});var l=a+1;if(b.pagination.active){l=(c.currentPage-1)*c.pageSize;var k=c.currentPage*c.pageSize-1;a>=l&&a<=k&&$("#"+d+" tr:eq("+(a-l+1)+")").html(g)}else $("#"+d+" tr:eq("+l+")").html(g)};this.updateRows=function(a,b){for(var c=0;c<a.length;c++)this.updateRow(a[c],b[c])};this.deleteRow=
function(a){b.rows.splice(a,1);--m;if(""!==x)this.search(x,-1);else if(b.pagination.active)p();else for(y(a-1),$("#"+d+" tr:eq("+(a+1)+")").remove();a<m;a++){var c=0===a%2?"evenRow":"oddRow";$("#"+d+" tr:eq("+(a+1)+")").removeClass().addClass(c)}};this.deleteRows=function(a){var b=this;a.forEach(function(a){return b.deleteRow(a)})};this.selectedRow=function(){return g};this.selectedRowInModel=function(){return b.pagination.active?(c.currentPage-1)*c.pageSize+g:g};this.selectedColumn=function(){return f};
this.columnCount=function(){return A};this.rowCount=function(){return m};this.getRow=function(a){return b.rows[a]};this.getRows=function(){return b.rows};this.on=function(a,b){w.set(a,b)};this.currentPage=function(){return currentPage};this.pageCount=function(){return pageCount};this.getId=function(){return d};this.setLocale=function(a){v=a};this.search=function(a,c){c=void 0===c?-1:c;if(b.searching){x=a;var d=null;d=-1!==c?b.rows.filter(function(d){return d[b.columns[c].columnId].toLowerCase(v).includes(a.toLowerCase(v))}):
b.rows.filter(function(b){return Object.values(b).join(";").toLowerCase(v).includes(a.toLowerCase(v))});$("#"+b.tableId+" tbody").remove();b.pagination.active?p(d):z(d);return d.length}console.error("Searching is not enabled for this table! You can enable searching by defining searching property as true for the table settings.")}}};$.fn.FoliumTable=function(b){if(void 0===b)return this[0].foliumObject;b.tableId=this[0].id;b=new FoliumTable(b,$(this));this[0].foliumObject=b;return this[0].foliumObject};