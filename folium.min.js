var FoliumTable=function(b,p){function A(a){-1===a?(k=-1,v=void 0):e===$(document).attr("activeTable")&&(k=a,void 0!==v&&v.removeClass("selectedRow"),a=(new Number(a+1)).toString(),v=$("#"+e+" tr:eq("+a+")"),v.focus(),v.addClass("selectedRow"))}function w(a){if(!(a>=C)&&e===$(document).attr("activeTable")){$("#"+e+" th:eq("+g+")").removeClass("selectedColumnHeader");g=a;void 0!==x&&x.removeClass("selectedColumn");var b=(new Number(k+1)).toString();x=$("#"+e+" tr:eq("+b+")").find("td:eq("+a+")");x.addClass("selectedColumn");
$("#"+e+" th:eq("+g+")").addClass("selectedColumnHeader");x.focus()}}function G(a,b){return a.localeCompare(b,l)}function D(a,b){return a-b}function K(a){if(-1!==a&&b.sortable){var d=b.columns[a].columnId,q=b.columns[a].dataType,f=E.get(d),c=r.get(q),e=m?a:d;b.rows.sort(function(a,b){return f*c(a[e],b[e])});E.set(d,-1*f)}}function H(a){a=void 0===a?b.rows:a;var d=a.length%c.pageSize;c.numOfPages=parseInt(a.length/c.pageSize);c.numOfPages=0!==d?c.numOfPages+1:c.numOfPages;d=(c.currentPage-1)*c.pageSize+
1;a=d+a.slice((c.currentPage-1)*c.pageSize,c.currentPage*c.pageSize).length-1;$("#"+e+"pageInfo").val(d+"-"+a+" | Page: "+c.currentPage+"/"+c.numOfPages)}function n(a){a=void 0===a?b.rows:a;$("#"+b.tableId+" tbody").remove();B(a);H(a)}function B(a){a=void 0===a?b.rows:a;p.append("<tbody>");var d="";(b.pagination.active?a.slice((c.currentPage-1)*c.pageSize,c.currentPage*c.pageSize):a).forEach(function(a,c){var q='<tr class="'+(0===c%2?"evenRow":"oddRow")+'">';b.columns.forEach(function(b,d){var f=
m?a[d]:a[b.columnId];var e=y(c,d,f,a);q+=void 0===f?"<td></td>":"<td>"+e+"</td>"});q+="</tr>";d+=q});p.append(d);p.append("</tbody>");$("#"+e).on("click","td",function(){var a=$(this).parent(),b=$(this);a=a.index();b=b.index();A(a);w(b);z.get("rowClicked")(a)});$("#"+b.tableId+" td").dblclick(function(){var a=$(this).parent().index();I($(this));z.get("rowDoubleClicked")(a)})}function I(a){var d=a.css("width"),c=a.parent().index(),f=a.index(),e=b.columns[f].columnId,F=m?b.rows[c][f]:b.rows[c][e];if(b.editable){a.html('<input type="text" id="cellEditor" style="width:'+
d+'" value="'+F+'" />');var h=$("#cellEditor");h.focus();h[0].setSelectionRange(F.length,F.length);$("#cellEditor").focusout(function(){var d=h.val();d=t.get(b.columns[f].dataType)(d);m?b.rows[c][f]=d:b.rows[c][e]=d;d=y(c,f,d,b.rows[c]);a.html(d)});$("#cellEditor").keypress(function(a){13===a.keyCode&&(w(f+1),p.focus())})}}var L=this;if(void 0===b.columns)console.error('"columns" property is not defined in table settings. Please make sure that it is defined in your table settings.');else if(void 0===
b.rows)console.error('"rows" property is not defined in table settings. Please make sure that it is defined in your table settings.');else{var h=b.rows.length,C=b.columns.length,k=-1,v=void 0,g=-1,x=void 0,e=b.tableId,y=void 0,l="en-US",u="",m=void 0,c={pageSize:-1,numOfPages:0,currentPage:1},E=new Map,r=new Map,z=new Map,t=new Map;z.set("rowClicked",function(a){});z.set("rowDoubleClicked",function(a){});b.pagination=void 0===b.pagination?{active:!1,size:-1}:b.pagination;b.sortable=void 0===b.sortable?
!1:b.sortable;b.editable=void 0===b.editable?!1:b.editable;b.searching=void 0===b.searching?!1:b.searching;r.set("number",D);r.set("float",D);r.set("integer",D);r.set("datetime",function(a,b){return a>b?1:a<b?-1:0});r.set("string",G);r.set(void 0,G);t.set("integer",function(a){return parseInt(a)});t.set("float",function(a){return parseFloat(a)});t.set("number",function(a){return parseFloat(a)});t.set("datetime",function(a){return new Date(a)});t.set("integer",function(a){return a.toString()});t.set(void 0,
function(a){return a.toString()});p.addClass("folium");p.attr("tabindex","0");m=void 0!==b.rowsAsArrays&&null!==b.rowsAsArrays&&"boolean"===typeof b.rowsAsArrays?b.rowsAsArrays:!1;y=this.cellRenderer=void 0!==b.cellRenderer?b.cellRenderer:function(a,b,c,e){return c};void 0!==b.width&&$(".folium").css("width",""+b.width);void 0!==b.height&&$(".folium").css("height",""+b.height);var J=b.columns;J.forEach(function(a){return E.set(a.columnId,1)});(function(a){var b='<thead><tr id="columns">';a.forEach(function(a){return b+=
'<th class="columnHeader sortHeader" id="'+a.columnId+'">'+a.displayText+"</th>"});b+="</tr>";p.append(b+"</thead>")})(J);b.pagination.active&&"number"===typeof b.pagination.size&&($("#"+e).before('<div class="foliumPageBar"><button id="'+e+'foliumPageFirst" class="pageBarButton">First</button><button class="pageBarButton" id="'+e+'foliumPagePrevious"><</button><input type="text" id="'+e+'pageInfo" class="infoBox" readonly /><button class="pageBarButton" id="'+e+'foliumPageNext">></button><button class="pageBarButton" id="'+
e+'foliumPageLast">Last</button></div>'),$(".foliumPageBar").css("width",$("#"+e).css("width")),c.pageSize=b.pagination.size,H(),$("#"+e+"foliumPageNext").click(function(){c.currentPage+1>c.numOfPages||(c.currentPage++,n())}),$("#"+e+"foliumPagePrevious").click(function(){1>c.currentPage-1||(c.currentPage--,n())}),$("#"+e+"foliumPageFirst").click(function(){1!==c.currentPage&&(c.currentPage=1,n())}),$("#"+e+"foliumPageLast").click(function(){c.currentPage!==c.numOfPages&&(c.currentPage=c.numOfPages,
n())}));void 0===b.pagination.size&&console.error("Pagination size is not defined! Pagination skipped.");B();$("td,th").on("focus",function(){$(L).closest("table").focus()});$("#"+b.tableId).focus(function(){$(document).attr("activeTable",b.tableId)});$("#"+b.tableId).focusout(function(){$(document).attr("activeTable",null)});$("#"+e+" th").click(function(){var a=$(this).index();b.sortable&&(K(a),$("#"+b.tableId+" tbody").remove(),B())});$(document).keydown(function(a){var d=$(document).attr("activeTable");
a=a.keyCode;null!==d&&void 0!==d&&d===e&&(37===a?0>=g||w(g-1):38===a?0>=k||(A(k-1),w(g)):39===a?g!==C-1&&w(g+1):40===a?k!==h-1&&(A(k+1),w(g)):b.editable&&I(x))});this.addRow=function(a){b.rows.push(a);h+=1;if(""!==u)this.search(u,-1);else if(b.pagination.active)n();else{var d='<tr class="'+(0===(h-1)%2?"evenRow":"oddRow")+'">';b.columns.forEach(function(b,c){var e=m?a[c]:a[b.columnId],f=y(h-1,c,e,a);d+=void 0===e?"<td></td>":"<td>"+f+"</td>"});d+="</tr>";$("#"+e+" tr:last").after(d)}};this.addRows=
function(a){b.rows=b.rows.concat(a);if(""!==u)this.search(u,-1);else if(b.pagination.active)n();else{var d="";a.forEach(function(a){var c='<tr class="'+(0===(h-1)%2?"evenRow":"oddRow")+'">';b.columns.forEach(function(b,d){var e=m?a[d]:a[b.columnId],f=y(h-1,d,e,a);c+=void 0===e?"<td></td>":"<td>"+f+"</td>"});c+="</tr>";d+=c;h++});$("#"+e+" tr:last").after(d)}};this.updateRow=function(a,d){var q=this,f=b.rows[a];m?Object.keys(d).forEach(function(a){var c=b.columns.map(function(a){return a.columnId}).indexOf(a);
f[c]=d[a]}):Object.keys(d).forEach(function(a){return f[a]=d[a]});var k="";b.columns.forEach(function(a,b){var d=m?f[b]:f[a.columnId],c=q.cellRenderer(h-1,b,d,f);k+=void 0===d?"<td></td>":"<td>"+c+"</td>"});var g=a+1;if(b.pagination.active){g=(c.currentPage-1)*c.pageSize;var l=c.currentPage*c.pageSize-1;a>=g&&a<=l&&$("#"+e+" tr:eq("+(a-g+1)+")").html(k)}else $("#"+e+" tr:eq("+g+")").html(k)};this.updateRows=function(a,b){for(var c=0;c<a.length;c++)this.updateRow(a[c],b[c])};this.deleteRow=function(a){b.rows.splice(a,
1);--h;if(""!==u)this.search(u,-1);else if(b.pagination.active)n();else for(A(a-1),$("#"+e+" tr:eq("+(a+1)+")").remove();a<h;a++){var c=0===a%2?"evenRow":"oddRow";$("#"+e+" tr:eq("+(a+1)+")").removeClass().addClass(c)}};this.deleteRows=function(a){var b=this;a.forEach(function(a){return b.deleteRow(a)})};this.selectedRow=function(){return k};this.selectedRowInModel=function(){return b.pagination.active?(c.currentPage-1)*c.pageSize+k:k};this.selectedColumn=function(){return g};this.columnCount=function(){return C};
this.rowCount=function(){return h};this.getRow=function(a){return b.rows[a]};this.getRows=function(){return b.rows};this.on=function(a,b){z.set(a,b)};this.currentPage=function(){return currentPage};this.pageCount=function(){return pageCount};this.getId=function(){return e};this.setLocale=function(a){l=a};this.search=function(a,c){c=void 0===c?-1:c;if(b.searching){u=a;var d=null;d=m?-1!==c?b.rows.filter(function(b){return b[c].toLowerCase(l).includes(a.toLowerCase(l))}):b.rows.filter(function(b){return Object.values(b).join(";").toLowerCase(l).includes(a.toLowerCase(l))}):
-1!==c?b.rows.filter(function(d){return d[b.columns[c].columnId].toLowerCase(l).includes(a.toLowerCase(l))}):b.rows.filter(function(b){return Object.values(b).join(";").toLowerCase(l).includes(a.toLowerCase(l))});$("#"+b.tableId+" tbody").remove();b.pagination.active?n(d):B(d);return d.length}console.error("Searching is not enabled for this table! You can enable searching by defining searching property as true for the table settings.")}}};
$.fn.FoliumTable=function(b){if(void 0===b)return this[0].foliumObject;b.tableId=this[0].id;b=new FoliumTable(b,$(this));this[0].foliumObject=b;return this[0].foliumObject};