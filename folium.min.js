var FoliumTable=function(b,A){function C(a){-1===a?(g=-1,q=void 0):d===$(document).attr("activeTable")&&(g=a,void 0!==q&&q.removeClass("selectedRow"),a=(new Number(a+1)).toString(),q=$("#"+d+" tr:eq("+a+")"),q.focus(),q.addClass("selectedRow"))}function w(a){if(!(a>=F)&&d===$(document).attr("activeTable")){$("#"+d+" th:eq("+k+")").removeClass("selectedColumnHeader");k=a;void 0!==r&&r.removeClass("selectedColumn");var b=(new Number(g+1)).toString();r=$("#"+d+" tr:eq("+b+")").find("td:eq("+a+")");r.addClass("selectedColumn");
$("#"+d+" th:eq("+k+")").addClass("selectedColumnHeader");r.focus()}}function K(a,b){return a.localeCompare(b,l)}function G(a,b){return a-b}function H(a,e){e=void 0===e?!0:e;if(-1!==a&&b.sortable){var f=b.columns[a].columnId,c=b.columns[a].dataType,d=I.get(f);e&&(d*=-1,I.set(f,d));var O=t.get(c),x=n?a:f;b.rows.sort(function(a,b){return d*O(a[x],b[x])})}}function J(a){a=void 0===a?b.rows:a;var e=a.length%c.pageSize;c.numOfPages=parseInt(a.length/c.pageSize);c.numOfPages=0!==e?c.numOfPages+1:c.numOfPages;
e=(c.currentPage-1)*c.pageSize+1;a=e+a.slice((c.currentPage-1)*c.pageSize,c.currentPage*c.pageSize).length-1;if($("#"+d+"foliumPageJumpTo option").length!==c.numOfPages){$("#"+d+"foliumPageJumpTo").empty();for(var f="",m=1;m<=c.numOfPages;m++)f+='<option value="'+m+'">'+m+"</option>";$("#foliumPageSwitcher").html('<select id="'+d+'foliumPageJumpTo" class="pageJumpComboBox">'+f+"</select> / "+c.numOfPages);$("#"+d+"foliumPageJumpTo").change(function(){c.currentPage=parseInt($(this).val());p()})}$("#"+
d+"foliumPageJumpTo option:selected").prop("selected",!1);$("#"+d+"foliumPageJumpTo option[value="+c.currentPage+"]").prop("selected",!0);$("#currentPageInfo").html(e+"-"+a+" | Page: ")}function p(a){a=void 0===a?b.rows:a;$("#"+b.tableId+" tbody").remove();D(a);J(a)}function D(a){a=void 0===a?b.rows:a;var e="";(b.pagination.active?a.slice((c.currentPage-1)*c.pageSize,c.currentPage*c.pageSize):a).forEach(function(a,c){var f='<tr class="'+(0===c%2?"evenRow":"oddRow")+'">';b.columns.forEach(function(b,
e){var d=n?a[e]:a[b.columnId];var m=y(c,e,d,a);f+=void 0===d?"<td></td>":"<td>"+m+"</td>"});f+="</tr>";e+=f});A.append("<tbody>"+e+"</tbody>");$("#"+d).on("click","td",function(){var a=$(this).parent(),b=$(this);a=a.index();b=b.index();C(a);w(b);B.get("rowClicked")(a)});$("#"+b.tableId+" td").dblclick(function(){var a=$(this).parent().index();L($(this));B.get("rowDoubleClicked")(a)})}function L(a){var e=a.css("width"),f=a.parent().index(),c=a.index(),d=b.columns[c].columnId,h=n?b.rows[f][c]:b.rows[f][d];
if(b.editable){a.html('<input type="text" id="cellEditor" style="width:'+e+'" value="'+h+'" />');var x=$("#cellEditor");x.focus();x[0].setSelectionRange(h.length,h.length);$("#cellEditor").focusout(function(){var e=x.val();e=u.get(b.columns[c].dataType)(e);n?b.rows[f][c]=e:b.rows[f][d]=e;e=y(f,c,e,b.rows[f]);a.html(e)});$("#cellEditor").keypress(function(a){13===a.keyCode&&(w(c+1),A.focus())})}}var P=this;if(void 0===b.columns)console.error('"columns" property is not defined in table settings. Please make sure that it is defined in your table settings.');
else if(void 0===b.rows)console.error('"rows" property is not defined in table settings. Please make sure that it is defined in your table settings.');else{var h=b.rows.length,F=b.columns.length,g=-1,q=void 0,k=-1,r=void 0,d=b.tableId,y=void 0,M=void 0,l="en-US",v="",E=-1,z=-1,n=void 0,c={pageSize:-1,numOfPages:0,currentPage:1},I=new Map,t=new Map,B=new Map,u=new Map;B.set("rowClicked",function(a){});B.set("rowDoubleClicked",function(a){});b.pagination=void 0===b.pagination?{active:!1,size:-1}:b.pagination;
b.sortable=void 0===b.sortable?!1:b.sortable;b.editable=void 0===b.editable?!1:b.editable;t.set("number",G);t.set("float",G);t.set("integer",G);t.set("datetime",function(a,b){return a>b?1:a<b?-1:0});t.set("string",K);t.set(void 0,K);u.set("integer",function(a){return parseInt(a)});u.set("float",function(a){return parseFloat(a)});u.set("number",function(a){return parseFloat(a)});u.set("datetime",function(a){return new Date(a)});u.set("integer",function(a){return a.toString()});u.set(void 0,function(a){return a.toString()});
A.addClass("folium");A.attr("tabindex","0");n=void 0!==b.rowsAsArrays&&null!==b.rowsAsArrays&&"boolean"===typeof b.rowsAsArrays?b.rowsAsArrays:!1;y=void 0!==b.cellRenderer?b.cellRenderer:function(a,b,c,d){return c};M=void 0!==b.headerRenderer?b.headerRenderer:function(a,b,c){return b};void 0!==b.width&&$(".folium").css("width",""+b.width);void 0!==b.height&&$(".folium").css("height",""+b.height);var N=b.columns;N.forEach(function(a){return I.set(a.columnId,-1)});(function(a){var b='<thead><tr id="columns">';
a.forEach(function(a,e){return b+='<th class="columnHeader sortHeader" id="'+a.columnId+'">'+M(e,a.displayText,a)+"</th>"});b+="</tr>";A.append(b+"</thead>")})(N);b.pagination.active&&"number"===typeof b.pagination.size&&($("#"+d).before('<div class="foliumPageBar"><button id="'+d+'foliumPageFirst" class="pageBarButton">First</button><button class="pageBarButton" id="'+d+'foliumPagePrevious"><</button><div id="'+d+'pageInfo" class="infoBox"><span id="currentPageInfo"></span><div id="foliumPageSwitcher"><select id="'+
d+'foliumPageJumpTo" class="pageJumpComboBox"></select> / 0</div></div><button class="pageBarButton" id="'+d+'foliumPageNext">></button><button class="pageBarButton" id="'+d+'foliumPageLast">Last</button></div>'),$(".foliumPageBar").css("width",$("#"+d).css("width")),c.pageSize=b.pagination.size,J(),$("#"+d+"foliumPageNext").click(function(){c.currentPage+1>c.numOfPages||(c.currentPage++,p())}),$("#"+d+"foliumPagePrevious").click(function(){1>c.currentPage-1||(c.currentPage--,p())}),$("#"+d+"foliumPageFirst").click(function(){1!==
c.currentPage&&(c.currentPage=1,p())}),$("#"+d+"foliumPageLast").click(function(){c.currentPage!==c.numOfPages&&(c.currentPage=c.numOfPages,p())}));void 0===b.pagination.size&&console.error("Pagination size is not defined! Pagination skipped.");D();$("td,th").on("focus",function(){$(P).closest("table").focus()});$("#"+b.tableId).focus(function(){$(document).attr("activeTable",b.tableId)});$("#"+b.tableId).focusout(function(){$(document).attr("activeTable",null)});$("#"+d+" th").click(function(){var a=
$(this).index();z=a;b.sortable&&(H(a),$("#"+b.tableId+" tbody").remove(),D())});$(document).keydown(function(a){var e=$(document).attr("activeTable");a=a.keyCode;null!==e&&void 0!==e&&e===d&&(37===a?0>=k||w(k-1):38===a?0>=g||(C(g-1),w(k)):39===a?k!==F-1&&w(k+1):40===a?(e=$("#"+d+" tbody tr").length,g!==(b.pagination.active?e-1:h-1)&&(C(g+1),w(k))):b.editable&&L(r))});this.addRow=function(a){b.rows.push(a);h+=1;if(""!==v)this.search(v,E);else if(-1!==z&&H(z,!1),b.pagination.active)p();else{var e='<tr class="'+
(0===(h-1)%2?"evenRow":"oddRow")+'">';b.columns.forEach(function(b,c){var d=n?a[c]:a[b.columnId],f=y(h-1,c,d,a);e+=void 0===d?"<td></td>":"<td>"+f+"</td>"});e+="</tr>";$("#"+d+" tbody").append(e)}};this.addRows=function(a){b.rows=b.rows.concat(a);if(""!==v)this.search(v,E);else if(-1!==z&&H(z,!1),b.pagination.active)p();else{var e="";a.forEach(function(a){var c='<tr class="'+(0===(h-1)%2?"evenRow":"oddRow")+'">';b.columns.forEach(function(b,e){var d=n?a[e]:a[b.columnId],f=y(h-1,e,d,a);c+=void 0===
d?"<td></td>":"<td>"+f+"</td>"});c+="</tr>";e+=c;h++});$("#"+d+" tbody").append(e)}};this.updateRow=function(a,e){var f=b.rows[a];n?Object.keys(e).forEach(function(a){var c=b.columns.map(function(a){return a.columnId}).indexOf(a);f[c]=e[a]}):Object.keys(e).forEach(function(a){return f[a]=e[a]});var m="";b.columns.forEach(function(a,b){var c=n?f[b]:f[a.columnId],e=y(h-1,b,c,f);m+=void 0===c?"<td></td>":"<td>"+e+"</td>"});var g=a+1;if(b.pagination.active){g=(c.currentPage-1)*c.pageSize;var k=c.currentPage*
c.pageSize-1;a>=g&&a<=k&&$("#"+d+" tr:eq("+(a-g+1)+")").html(m)}else $("#"+d+" tr:eq("+g+")").html(m)};this.updateRows=function(a,b){for(var c=0;c<a.length;c++)this.updateRow(a[c],b[c])};this.deleteRow=function(a){b.rows.splice(a,1);--h;if(""!==v)this.search(v,E);else if(b.pagination.active)p();else for(C(a-1),$("#"+d+" tr:eq("+(a+1)+")").remove();a<h;a++){var c=0===a%2?"evenRow":"oddRow";$("#"+d+" tr:eq("+(a+1)+")").removeClass().addClass(c)}};this.deleteRows=function(a){var b=this;a.forEach(function(a){return b.deleteRow(a)})};
this.selectedRow=function(){return g};this.selectedRowInModel=function(){return b.pagination.active?(c.currentPage-1)*c.pageSize+g:g};this.selectedColumn=function(){return k};this.columnCount=function(){return F};this.rowCount=function(){return h};this.getRow=function(a){return b.rows[a]};this.getRows=function(){return b.rows};this.on=function(a,b){B.set(a,b)};this.currentPage=function(){return currentPage};this.pageCount=function(){return pageCount};this.getId=function(){return d};this.setLocale=
function(a){l=a};this.search=function(a,e){e=void 0===e?-1:e;v=a;var d=null;d=n?-1!==e?b.rows.filter(function(b){return b[e].toLowerCase(l).includes(a.toLowerCase(l))}):b.rows.filter(function(b){return Object.values(b).join(";").toLowerCase(l).includes(a.toLowerCase(l))}):-1!==e?b.rows.filter(function(c){return c[b.columns[e].columnId].toLowerCase(l).includes(a.toLowerCase(l))}):b.rows.filter(function(b){return Object.values(b).join(";").toLowerCase(l).includes(a.toLowerCase(l))});$("#"+b.tableId+
" tbody").remove();b.pagination.active?(c.currentPage=1,p(d)):D(d);return d.length};this.clear=function(){$("#"+d+" tbody").empty();b.rows=[];h=0;k=g=-1;r=q=void 0;z=E=-1;c.currentPage=1;c.numOfPages=0;b.pagination.active&&J(b.rows)}}};$.fn.FoliumTable=function(b){if(void 0===b)return this[0].foliumObject;b.tableId=this[0].id;b=new FoliumTable(b,$(this));this[0].foliumObject=b;return this[0].foliumObject};