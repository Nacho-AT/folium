var FoliumTable=function(b,h){function y(a){-1===a?(f=-1,r=void 0):d===$(document).attr("activeTable")&&(f=a,void 0!==r&&r.removeClass("selectedRow"),a=(new Number(a+1)).toString(),r=$("#"+d+" tr:eq("+a+")"),r.focus(),r.addClass("selectedRow"))}function t(a){if(!(a>=A)&&d===$(document).attr("activeTable")){$("#"+d+" th:eq("+g+")").removeClass("selectedColumnHeader");g=a;void 0!==u&&u.removeClass("selectedColumn");var b=(new Number(f+1)).toString();u=$("#"+d+" tr:eq("+b+")").find("td:eq("+a+")");u.addClass("selectedColumn");
$("#"+d+" th:eq("+g+")").addClass("selectedColumnHeader");u.focus()}}function D(a,b){return a.localeCompare(b,v)}function B(a,b){return a-b}function I(a){if(-1!==a&&b.sortable){var e=b.columns[a].columnId;a=b.columns[a].dataType;var c=C.get(e),d=n.get(a);b.rows.sort(function(a,b){return c*d(a[e],b[e])});C.set(e,-1*c)}}function E(a){a=void 0===a?b.rows:a;var e=a.length%c.pageSize;c.numOfPages=parseInt(a.length/c.pageSize);c.numOfPages=0!==e?c.numOfPages+1:c.numOfPages;e=(c.currentPage-1)*c.pageSize+
1;a=e+a.slice((c.currentPage-1)*c.pageSize,c.currentPage*c.pageSize).length-1;$("#"+d+"pageInfo").val(e+"-"+a+" | Page: "+c.currentPage+"/"+c.numOfPages)}function p(a){a=void 0===a?b.rows:a;$("#"+b.tableId+" tbody").remove();z(a);E(a)}function z(a){a=void 0===a?b.rows:a;h.append("<tbody>");(b.pagination.active?a.slice((c.currentPage-1)*c.pageSize,c.currentPage*c.pageSize):a).forEach(function(a,c){var e='<tr class="'+(0===c%2?"evenRow":"oddRow")+'">';b.columns.forEach(function(b,m){var d=a[b.columnId],
J=F(c,m,d,a);e+=void 0===d?"<td></td>":"<td>"+J+"</td>"});e+="</tr>";h.append(e)});h.append("</tbody>");$("#"+d).on("click","td",function(){var a=$(this).parent(),b=$(this);a=a.index();b=b.index();y(a);t(b);w.get("rowClicked")(a)});$("#"+b.tableId+" td").dblclick(function(){var a=$(this).parent().index();G($(this));w.get("rowDoubleClicked")(a)})}function G(a){var e=a.text(),c=a.css("width"),d=a.parent().index(),f=a.index();if(b.editable){a.html('<input type="text" id="cellEditor" style="width:'+c+
'" value="'+e+'" />');var k=$("#cellEditor");k.focus();k[0].setSelectionRange(e.length,e.length);$("#cellEditor").focusout(function(){var e=k.val(),c=b.columns[f].columnId;e=q.get(b.columns[f].dataType)(e);b.rows[d][c]=e;a.html(e)});$("#cellEditor").keypress(function(a){13===a.keyCode&&(t(f+1),h.focus())})}}var K=this;if(void 0===b.columns)console.error('"columns" property is not defined in table settings. Please make sure that it is defined in your table settings.');else if(void 0===b.rows)console.error('"rows" property is not defined in table settings. Please make sure that it is defined in your table settings.');
else{var l=b.rows.length,A=b.columns.length,f=-1,r=void 0,g=-1,u=void 0,d=b.tableId,F=void 0,v="en-US",x="",c={pageSize:-1,numOfPages:0,currentPage:1},C=new Map,n=new Map,w=new Map,q=new Map;w.set("rowClicked",function(a){});w.set("rowDoubleClicked",function(a){});b.pagination=void 0===b.pagination?{active:!1,size:-1}:b.pagination;b.sortable=void 0===b.sortable?!1:b.sortable;b.editable=void 0===b.editable?!1:b.editable;b.searching=void 0===b.searching?!1:b.searching;n.set("number",B);n.set("float",
B);n.set("integer",B);n.set("datetime",function(a,b){return a>b?1:a<b?-1:0});n.set("string",D);n.set(void 0,D);q.set("integer",function(a){return parseInt(a)});q.set("float",function(a){return parseFloat(a)});q.set("number",function(a){return parseFloat(a)});q.set("datetime",function(a){return new Date(a)});q.set("integer",function(a){return a.toString()});q.set(void 0,function(a){return a.toString()});h.addClass("folium");h.attr("tabindex","0");F=this.cellRenderer=void 0!==b.cellRenderer?b.cellRenderer:
function(a,b,c,d){return c};void 0!==b.width&&$(".folium").css("width",""+b.width);void 0!==b.height&&$(".folium").css("height",""+b.height);var H=b.columns;H.forEach(function(a){return C.set(a.columnId,1)});(function(a){var b='<thead><tr id="columns">';a.forEach(function(a){return b+='<th class="columnHeader sortHeader" id="'+a.columnId+'">'+a.displayText+"</th>"});b+="</tr>";h.append(b+"</thead>")})(H);b.pagination.active&&"number"===typeof b.pagination.size&&($("#"+d).before('<div class="foliumPageBar"><button id="'+
d+'foliumPageFirst" class="pageBarButton">First</button><button class="pageBarButton" id="'+d+'foliumPagePrevious"><</button><input type="text" id="'+d+'pageInfo" class="infoBox" readonly /><button class="pageBarButton" id="'+d+'foliumPageNext">></button><button class="pageBarButton" id="'+d+'foliumPageLast">Last</button></div>'),$(".foliumPageBar").css("width",$("#"+d).css("width")),c.pageSize=b.pagination.size,E(),$("#"+d+"foliumPageNext").click(function(){c.currentPage+1>c.numOfPages||(c.currentPage++,
p())}),$("#"+d+"foliumPagePrevious").click(function(){1>c.currentPage-1||(c.currentPage--,p())}),$("#"+d+"foliumPageFirst").click(function(){1!==c.currentPage&&(c.currentPage=1,p())}),$("#"+d+"foliumPageLast").click(function(){c.currentPage!==c.numOfPages&&(c.currentPage=c.numOfPages,p())}));void 0===b.pagination.size&&console.error("Pagination size is not defined! Pagination skipped.");z();$("td,th").on("focus",function(){$(K).closest("table").focus()});$("#"+b.tableId).focus(function(){$(document).attr("activeTable",
b.tableId)});$("#"+b.tableId).focusout(function(){$(document).attr("activeTable",null)});$("#"+d+" th").click(function(){var a=$(this).index();b.sortable&&(I(a),$("#"+b.tableId+" tbody").remove(),z())});$(document).keydown(function(a){var c=$(document).attr("activeTable");a=a.keyCode;null!==c&&void 0!==c&&c===d&&(37===a?0>=g||t(g-1):38===a?0>=f||(y(f-1),t(g)):39===a?g!==A-1&&t(g+1):40===a?f!==l-1&&(y(f+1),t(g)):b.editable&&G(u))});this.addRow=function(a){var c=this;b.rows.push(a);l+=1;if(""!==x)this.search(x,
-1);else if(b.pagination.active)p();else{var m='<tr class="'+(0===(l-1)%2?"evenRow":"oddRow")+'">';b.columns.forEach(function(b,e){var d=a[b.columnId],f=c.cellRenderer(l-1,e,d,a);m+=void 0===d?"<td></td>":"<td>"+f+"</td>"});m+="</tr>";$("#"+d+" tr:last").after(m)}};this.addRows=function(a){var b=this;a.forEach(function(a){return b.addRow(a)})};this.updateRow=function(a,e){var m=this,f=b.rows[a];Object.keys(e).forEach(function(a){return f[a]=e[a]});var g="";b.columns.forEach(function(a,b){var c=f[a.columnId],
e=m.cellRenderer(l-1,b,c,f);g+=void 0===c?"<td></td>":"<td>"+e+"</td>"});var k=a+1;if(b.pagination.active){k=(c.currentPage-1)*c.pageSize;var h=c.currentPage*c.pageSize-1;a>=k&&a<=h&&$("#"+d+" tr:eq("+(a-k+1)+")").html(g)}else $("#"+d+" tr:eq("+k+")").html(g)};this.updateRows=function(a,b){for(var c=0;c<a.length;c++)this.updateRow(a[c],b[c])};this.deleteRow=function(a){b.rows.splice(a,1);--l;if(""!==x)this.search(x,-1);else if(b.pagination.active)p();else for(y(a-1),$("#"+d+" tr:eq("+(a+1)+")").remove();a<
l;a++){var c=0===a%2?"evenRow":"oddRow";$("#"+d+" tr:eq("+(a+1)+")").removeClass().addClass(c)}};this.deleteRows=function(a){var b=this;a.forEach(function(a){return b.deleteRow(a)})};this.selectedRow=function(){return f};this.selectedRowInModel=function(){return b.pagination.active?(c.currentPage-1)*c.pageSize+f:f};this.selectedColumn=function(){return g};this.columnCount=function(){return A};this.rowCount=function(){return l};this.getRow=function(a){return b.rows[a]};this.getRows=function(){return b.rows};
this.on=function(a,b){w.set(a,b)};this.currentPage=function(){return currentPage};this.pageCount=function(){return pageCount};this.getId=function(){return d};this.setLocale=function(a){v=a};this.search=function(a,c){c=void 0===c?-1:c;if(b.searching){x=a;var d=null;d=-1!==c?b.rows.filter(function(d){return d[b.columns[c].columnId].toLowerCase(v).includes(a.toLowerCase(v))}):b.rows.filter(function(b){return Object.values(b).join(";").toLowerCase(v).includes(a.toLowerCase(v))});$("#"+b.tableId+" tbody").remove();
b.pagination.active?p(d):z(d);return d.length}console.error("Searching is not enabled for this table! You can enable searching by defining searching property as true for the table settings.")}}};$.fn.FoliumTable=function(b){if(void 0===b)return this[0].foliumObject;b.tableId=this[0].id;b=new FoliumTable(b,$(this));this[0].foliumObject=b;return this[0].foliumObject};